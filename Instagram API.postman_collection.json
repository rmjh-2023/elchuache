{
	"info": {
		"_postman_id": "da426cff-6d04-4771-a264-4ef3f05ac4bc",
		"name": "Instagram API",
		"description": "This collection will allow you to connect to [Instagram's Graph API](https://developers.facebook.com/docs/instagram-api/), which allows Instagram Professionals - Businesses and Creators - to manage their presence on the platform. This guide will help you to **generate tokens**, **publish content**, **gather insights** and **manage an Instagram profile**.\n\nThe API is built on top of Facebook's Graph API, we recommend giving [this guide](https://developers.facebook.com/docs/graph-api/) a look before getting started.\n\n# Before You Start\n\nTo interact with the API, you must first have a Facebook App. You can create one following this [guide](https://desktop.postman.com/?desktopVersion=9.31.0&webVersion=9.31.22-ui-221031-1419&userId=19667706&teamId=3121756), for the purposes of the guide, we recommend using a `Business` App.\n\nAfter creating the app, you must generate a **User Access Token** with it. This token will allow you to manage permissions and objects you manage, you can generate it with this [guide](https://desktop.postman.com/?desktopVersion=9.31.0&webVersion=9.31.22-ui-221031-1419&userId=19667706&teamId=3121756). Afterwards, make sure to select the `Instagram` environment in Postman and paste the resulting token under the `user_access_token` variable.\n\nThe permission model for the API requires a **Page** to be linked with a [Professional Instagram Account](https://help.instagram.com/502981923235522?fbclid=IwAR1jt_4CNiu3TFxV6AN9wpI2EUy59TtxnrZP1RJuSUOZhuReTezFMs1cAAc) before starting. Linking process can be found [here](https://www.facebook.com/help/1148909221857370).\n\n## Access Token Permissions needed\n\nThese are the permissions needed for the requests in this collection:\n\n- `pages_show_list`\n- `instagram_basic`\n- `instagram_content_publish`\n- `pages_read_engagement`\n- `instagram_manage_comments`",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "22548641"
	},
	"item": [
		{
			"name": "Publishing",
			"item": [
				{
					"name": "create image container",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var json = JSON.parse(responseBody)",
									"pm.collectionVariables.set('ig-container-id', json.id)"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "https://graph.facebook.com/{{api-version}}/{{fb-user-id}}/media?image_url=https://raw.githubusercontent.com/rmjh-2023/elchuache/rmjh-2023-video/portada_video_ig.jpg&access_token={{fb-access-token}}&caption=%23Test %23Api",
							"protocol": "https",
							"host": [
								"graph",
								"facebook",
								"com"
							],
							"path": [
								"{{api-version}}",
								"{{fb-user-id}}",
								"media"
							],
							"query": [
								{
									"key": "image_url",
									"value": "https://raw.githubusercontent.com/rmjh-2023/elchuache/rmjh-2023-video/portada_video_ig.jpg"
								},
								{
									"key": "is_carousel_item",
									"value": "false",
									"disabled": true
								},
								{
									"key": "location_id",
									"value": "{location-id}",
									"disabled": true
								},
								{
									"key": "user_tags",
									"value": "{user-tags}",
									"disabled": true
								},
								{
									"key": "product_tags",
									"value": "{product-s}",
									"disabled": true
								},
								{
									"key": "access_token",
									"value": "{{fb-access-token}}"
								},
								{
									"key": "caption",
									"value": "%23Test %23Api"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "create video container",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var json = JSON.parse(responseBody)",
									"pm.collectionVariables.set('ig-container-id', json.id)"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "https://graph.facebook.com/{{api-version}}/{{fb-user-id}}/media?image_url=https://raw.githubusercontent.com/rmjh-2023/elchuache/video/portada_video_ig.jpg&caption=%23ElChuache %23Humor %23Joke&media_type=REELS&access_token={{fb-access-token}}&video_url=https://raw.githubusercontent.com/rmjh-2023/elchuache/video/Chuache_001_ig.mp4",
							"protocol": "https",
							"host": [
								"graph",
								"facebook",
								"com"
							],
							"path": [
								"{{api-version}}",
								"{{fb-user-id}}",
								"media"
							],
							"query": [
								{
									"key": "image_url",
									"value": "https://raw.githubusercontent.com/rmjh-2023/elchuache/video/portada_video_ig.jpg"
								},
								{
									"key": "is_carousel_item",
									"value": "false",
									"disabled": true
								},
								{
									"key": "location_id",
									"value": "{location-id}",
									"disabled": true
								},
								{
									"key": "user_tags",
									"value": "{user-tags}",
									"disabled": true
								},
								{
									"key": "caption",
									"value": "%23ElChuache %23Humor %23Joke"
								},
								{
									"key": "media_type",
									"value": "REELS"
								},
								{
									"key": "access_token",
									"value": "{{fb-access-token}}"
								},
								{
									"key": "video_url",
									"value": "https://raw.githubusercontent.com/rmjh-2023/elchuache/video/Chuache_001_ig.mp4"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "create Story container",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var json = JSON.parse(responseBody)",
									"pm.collectionVariables.set('post-container-id', json.id)"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "https://graph.facebook.com/{{api-version}}/{{fb-user-id}}/media?image_url=https://img.fruugo.com/product/0/97/215129970_max.jpg&access_token={{fb-access-token}}&caption=%23ElChuache %23Humor %23Joke",
							"protocol": "https",
							"host": [
								"graph",
								"facebook",
								"com"
							],
							"path": [
								"{{api-version}}",
								"{{fb-user-id}}",
								"media"
							],
							"query": [
								{
									"key": "image_url",
									"value": "https://img.fruugo.com/product/0/97/215129970_max.jpg"
								},
								{
									"key": "is_carousel_item",
									"value": "false",
									"disabled": true
								},
								{
									"key": "location_id",
									"value": "{location-id}",
									"disabled": true
								},
								{
									"key": "user_tags",
									"value": "{user-tags}",
									"disabled": true
								},
								{
									"key": "product_tags",
									"value": "{product-s}",
									"disabled": true
								},
								{
									"key": "access_token",
									"value": "{{fb-access-token}}"
								},
								{
									"key": "caption",
									"value": "%23ElChuache %23Humor %23Joke"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "publish container",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "https://graph.facebook.com/{{api-version}}/{{fb-user-id}}/media_publish?creation_id={{ig-container-id}}&access_token={{fb-access-token}}",
							"protocol": "https",
							"host": [
								"graph",
								"facebook",
								"com"
							],
							"path": [
								"{{api-version}}",
								"{{fb-user-id}}",
								"media_publish"
							],
							"query": [
								{
									"key": "creation_id",
									"value": "{{ig-container-id}}"
								},
								{
									"key": "access_token",
									"value": "{{fb-access-token}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "video container",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "https://graph.facebook.com/{{api-version}}/{{fb-user-id}}/media/{{ig-container-id}}",
							"protocol": "https",
							"host": [
								"graph",
								"facebook",
								"com"
							],
							"path": [
								"{{api-version}}",
								"{{fb-user-id}}",
								"media",
								"{{ig-container-id}}"
							],
							"query": [
								{
									"key": "is_carousel_item",
									"value": "false",
									"disabled": true
								},
								{
									"key": "location_id",
									"value": "{location-id}",
									"disabled": true
								},
								{
									"key": "user_tags",
									"value": "{user-tags}",
									"disabled": true
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "media",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "https://graph.facebook.com/{{api-version}}/{{fb-user-id}}/media?access_token={{access-token}}",
							"protocol": "https",
							"host": [
								"graph",
								"facebook",
								"com"
							],
							"path": [
								"{{api-version}}",
								"{{fb-user-id}}",
								"media"
							],
							"query": [
								{
									"key": "access_token",
									"value": "{{access-token}}"
								}
							]
						}
					},
					"response": []
				}
			],
			"description": "This section allows developers to upload and publish a Reel into an Instagram User from a server.\n\nFor this section, you'll need to introduce a video link into the `video_url` variable. It needs to follow these specifications:\n\n- Container: MOV or MP4 (PMEG-4 Part 14)\n- Audio codec: AAC, 48khz\n- Video codec: HEVC or H.264\n- Frame rate: 23-60 FPS\n- Picture size:\n    - Maximum 1920 horizontal pixels\n    - Recommended aspect ratio 9:16\n- Video bitrate: 25 Mbps maximum\n- Audio bitrate: 128 kbps\n- Duration 15 minutes maximum, 3 seconds minimum\n- File size: 1 GB maximum\n    \n\nMore information about Reels Publishing can be found [here](https://developers.facebook.com/docs/instagram-api/guides/content-publishing/#reels-posts)."
		},
		{
			"name": "Facebook",
			"item": [
				{
					"name": "token",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var json = JSON.parse(responseBody)",
									"pm.collectionVariables.set('access-token', json.access_token)"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "https://graph.facebook.com/{{api-version}}/oauth/access_token?grant_type=fb_exchange_token&client_id={{fb-app-id}}&client_secret={{fb-app-secret}}&fb_exchange_token={{fb-access-token}}",
							"protocol": "https",
							"host": [
								"graph",
								"facebook",
								"com"
							],
							"path": [
								"{{api-version}}",
								"oauth",
								"access_token"
							],
							"query": [
								{
									"key": "grant_type",
									"value": "fb_exchange_token"
								},
								{
									"key": "client_id",
									"value": "{{fb-app-id}}"
								},
								{
									"key": "client_secret",
									"value": "{{fb-app-secret}}"
								},
								{
									"key": "fb_exchange_token",
									"value": "{{fb-access-token}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "user api limit",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "https://graph.facebook.com/{{api-version}}/{{fb-user-id}}/content_publishing_limit?fields=quota_usage,rate_limit_settings&access_token={{access-token}}",
							"protocol": "https",
							"host": [
								"graph",
								"facebook",
								"com"
							],
							"path": [
								"{{api-version}}",
								"{{fb-user-id}}",
								"content_publishing_limit"
							],
							"query": [
								{
									"key": "fields",
									"value": "quota_usage,rate_limit_settings"
								},
								{
									"key": "access_token",
									"value": "{{access-token}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "bussiness instagram account",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var json = JSON.parse(responseBody)",
									"pm.environment.set('access-token', json.access_token)"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "https://graph.facebook.com/{{api-version}}/{{ig-bussiness-account}}?fields=id,name,instagram_business_account&access_token={{fb-access-token}}",
							"protocol": "https",
							"host": [
								"graph",
								"facebook",
								"com"
							],
							"path": [
								"{{api-version}}",
								"{{ig-bussiness-account}}"
							],
							"query": [
								{
									"key": "fields",
									"value": "id,name,instagram_business_account"
								},
								{
									"key": "access_token",
									"value": "{{fb-access-token}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "me/account",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "https://graph.facebook.com/{{api-version}}/me/accounts?access_token={{admin-access-token}}",
							"protocol": "https",
							"host": [
								"graph",
								"facebook",
								"com"
							],
							"path": [
								"{{api-version}}",
								"me",
								"accounts"
							],
							"query": [
								{
									"key": "access_token",
									"value": "{{admin-access-token}}"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "content",
			"item": [
				{
					"name": "Upload local video",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "file",
							"file": {
								"src": "/home/ruben/ruben/instagram/Chuache_001.mp4"
							}
						},
						"url": {
							"raw": "https://graph-video.facebook.com/{{api-version}}/{{ig-bussiness-account}}/videos?access_token=EABcUySFIuloBAJ4j5YQv5vdv1ZCUl2S8JkB5TBHI1jkbsIN7huZCdFONx0zIBKWaw2UUKafxdxi6wtbnAjuXhcxapI4suMJZCR5ha3LhwpGHATOlv5FmtcXxc1weZBEOxlZAyZAYNZADw8XZCtiHUGV7Cg1CEhDzOGT6ZBudF3NSkEU7EhWv3E21y",
							"protocol": "https",
							"host": [
								"graph-video",
								"facebook",
								"com"
							],
							"path": [
								"{{api-version}}",
								"{{ig-bussiness-account}}",
								"videos"
							],
							"query": [
								{
									"key": "access_token",
									"value": "EABcUySFIuloBAJ4j5YQv5vdv1ZCUl2S8JkB5TBHI1jkbsIN7huZCdFONx0zIBKWaw2UUKafxdxi6wtbnAjuXhcxapI4suMJZCR5ha3LhwpGHATOlv5FmtcXxc1weZBEOxlZAyZAYNZADw8XZCtiHUGV7Cg1CEhDzOGT6ZBudF3NSkEU7EhWv3E21y"
								}
							]
						}
					},
					"response": []
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "api-version",
			"value": "v17.0"
		},
		{
			"key": "app-id",
			"value": "188830237471165"
		},
		{
			"key": "app-secret",
			"value": "34b4b7c272eb69964f56ef372529af14",
			"type": "string"
		},
		{
			"key": "app-redirect-url",
			"value": "https://rmventas-instagram.duckdns.org/"
		},
		{
			"key": "user-id",
			"value": ""
		},
		{
			"key": "app-code",
			"value": "",
			"type": "string"
		},
		{
			"key": "admin-access-token",
			"value": "",
			"type": "string"
		},
		{
			"key": "access-token",
			"value": "",
			"type": "string"
		},
		{
			"key": "fb-app-id",
			"value": "6496778543741530",
			"type": "string"
		},
		{
			"key": "fb-app-secret",
			"value": "2cdb30ef4ab723112cc79b6c151d5eca",
			"type": "string"
		},
		{
			"key": "fb-access-token",
			"value": ""
		},
		{
			"key": "fb-user-id",
			"value": "17841460247003254"
		},
		{
			"key": "ig-container-id",
			"value": "",
			"type": "string"
		},
		{
			"key": "ig-bussiness-account",
			"value": "",
			"type": "string"
		}
	]
}